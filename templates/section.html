{% extends "base.html" %}
{% block content %}
<h4 class="mb-3">{{ section.title }}</h4>
<form method="POST" enctype="multipart/form-data" class="mb-5">
  {{ form.hidden_tag() }}
  <input type="hidden" name="sid" value="{{ sid }}"/>
  {% for f in section.fields %}
    <div class="mb-3">
      <label class="form-label"><strong>{{ f.label }}</strong></label>
      {% set key = f.mapping_ref %}
      {% set wt = getattr(form, key.replace('.', '_'), None) %}
      {% if wt %}
        {{ wt(class="form-control") }}
      {% else %}
        {% if f.type == 'file' %}
          <input type="file" name="{{ key }}" class="form-control">
        {% elif f.type == 'date' %}
          <input type="date" name="{{ key }}" class="form-control">
        {% else %}
          <input class="form-control" name="{{ key }}">
        {% endif %}
      {% endif %}
    </div>
  {% endfor %}
  <div class="d-flex justify-content-between">
    {% if not is_first %}<button name="submit_back" value="1" class="btn btn-outline-secondary">← Back</button>{% endif %}
    {% if is_last %}
      <button name="submit_finish" value="1" class="btn btn-success">Submit ✓</button>
    {% else %}
      <button name="submit_next" value="1" class="btn btn-primary">Next →</button>
    {% endif %}
  </div>
</form>
{% endblock %}
